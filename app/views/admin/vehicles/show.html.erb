<% content_for :title, @vehicle.full_name %>

<div class="flex items-center justify-between mb-6">
  <div>
    <div class="text-sm breadcrumbs">
      <ul>
        <li><%= link_to "Vehicles", admin_vehicles_path %></li>
        <li><%= @vehicle.name %></li>
      </ul>
    </div>
    <h1 class="text-2xl font-bold"><%= @vehicle.full_name %></h1>
  </div>

  <div class="flex gap-2">
    <%= link_to edit_admin_vehicle_path(@vehicle), class: "btn btn-primary gap-2" do %>
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
      </svg>
      Edit
    <% end %>

    <%= link_to vehicle_path(@vehicle.slug), target: "_blank", class: "btn btn-ghost gap-2" do %>
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
      </svg>
      View Public
    <% end %>
  </div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
  <!-- Main Info -->
  <div class="lg:col-span-2 space-y-6">
    <!-- Image -->
    <div class="card bg-base-100 shadow">
      <figure class="aspect-video bg-base-200">
        <img src="<%= @vehicle.primary_image_url %>" alt="<%= @vehicle.full_name %>" class="object-cover w-full h-full">
      </figure>
    </div>

    <!-- Specs -->
    <div class="card bg-base-100 shadow">
      <div class="card-body">
        <h2 class="card-title mb-4">Specifications</h2>

        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
          <div>
            <p class="text-sm text-base-content/60">Range (WLTP)</p>
            <p class="font-medium"><%= @vehicle.range_wltp_km ? "#{@vehicle.range_wltp_km} km" : "—" %></p>
          </div>
          <div>
            <p class="text-sm text-base-content/60">Battery</p>
            <p class="font-medium"><%= @vehicle.battery_display || "—" %></p>
          </div>
          <div>
            <p class="text-sm text-base-content/60">0-100 km/h</p>
            <p class="font-medium"><%= @vehicle.acceleration_display || "—" %></p>
          </div>
          <div>
            <p class="text-sm text-base-content/60">Top Speed</p>
            <p class="font-medium"><%= @vehicle.top_speed_kmh ? "#{@vehicle.top_speed_kmh} km/h" : "—" %></p>
          </div>
          <div>
            <p class="text-sm text-base-content/60">Power</p>
            <p class="font-medium"><%= @vehicle.horsepower ? "#{@vehicle.horsepower} hp" : "—" %></p>
          </div>
          <div>
            <p class="text-sm text-base-content/60">Torque</p>
            <p class="font-medium"><%= @vehicle.torque_nm ? "#{@vehicle.torque_nm} Nm" : "—" %></p>
          </div>
          <div>
            <p class="text-sm text-base-content/60">Drive Type</p>
            <p class="font-medium"><%= @vehicle.drive_type || "—" %></p>
          </div>
          <div>
            <p class="text-sm text-base-content/60">Fast Charge</p>
            <p class="font-medium"><%= @vehicle.fast_charge_display || "—" %></p>
          </div>
          <div>
            <p class="text-sm text-base-content/60">Seats</p>
            <p class="font-medium"><%= @vehicle.seats || "—" %></p>
          </div>
        </div>
      </div>
    </div>

    <!-- Description -->
    <% if @vehicle.description.present? %>
      <div class="card bg-base-100 shadow">
        <div class="card-body">
          <h2 class="card-title mb-2">Description</h2>
          <p class="text-base-content/80"><%= @vehicle.description %></p>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Sidebar -->
  <div class="space-y-6">
    <!-- Status -->
    <div class="card bg-base-100 shadow">
      <div class="card-body">
        <h2 class="card-title mb-4">Status</h2>

        <div class="space-y-4">
          <div class="flex items-center justify-between">
            <span>Published</span>
            <% if @vehicle.published? %>
              <%= button_to "Unpublish", unpublish_admin_vehicle_path(@vehicle), method: :patch, class: "btn btn-sm btn-success" %>
            <% else %>
              <%= button_to "Publish", publish_admin_vehicle_path(@vehicle), method: :patch, class: "btn btn-sm btn-outline" %>
            <% end %>
          </div>

          <div class="flex items-center justify-between">
            <span>Featured</span>
            <%= button_to toggle_featured_admin_vehicle_path(@vehicle), method: :patch, class: "btn btn-sm #{@vehicle.featured? ? 'btn-secondary' : 'btn-outline'}" do %>
              <%= @vehicle.featured? ? "Featured" : "Not Featured" %>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <!-- Info -->
    <div class="card bg-base-100 shadow">
      <div class="card-body">
        <h2 class="card-title mb-4">Info</h2>

        <div class="space-y-3 text-sm">
          <div class="flex justify-between">
            <span class="text-base-content/60">Brand</span>
            <span class="font-medium"><%= @vehicle.brand.name %></span>
          </div>
          <div class="flex justify-between">
            <span class="text-base-content/60">Body Type</span>
            <span class="font-medium"><%= @vehicle.body_type.name %></span>
          </div>
          <div class="flex justify-between">
            <span class="text-base-content/60">Year</span>
            <span class="font-medium"><%= @vehicle.year || "—" %></span>
          </div>
          <div class="flex justify-between">
            <span class="text-base-content/60">Price</span>
            <span class="font-medium"><%= @vehicle.price_display %></span>
          </div>
          <div class="flex justify-between">
            <span class="text-base-content/60">Slug</span>
            <span class="font-medium text-xs"><%= @vehicle.slug %></span>
          </div>
          <div class="flex justify-between">
            <span class="text-base-content/60">Created</span>
            <span class="font-medium"><%= @vehicle.created_at.strftime("%b %d, %Y") %></span>
          </div>
        </div>
      </div>
    </div>

    <!-- Danger Zone -->
    <div class="card bg-base-100 shadow border border-error/20">
      <div class="card-body">
        <h2 class="card-title text-error mb-4">Danger Zone</h2>
        <%= button_to admin_vehicle_path(@vehicle),
            method: :delete,
            class: "btn btn-error btn-outline btn-block",
            data: { turbo_confirm: "Are you sure you want to delete this vehicle?" } do %>
          Delete Vehicle
        <% end %>
      </div>
    </div>
  </div>
</div>
